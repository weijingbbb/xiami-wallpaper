"use strict";const e=require("../../common/vendor.js"),a=require("../../api/apis.js");if(!Array){e.resolveComponent("uni-load-more")()}Math;const l={__name:"classlist",setup(l){const t=e.ref([]),s=e.ref(!1),i={pageNum:1,pageSize:12};let n;e.onLoad(a=>{let{id:l=null,name:t=null,type:s=null}=a;s&&(i.type=s),l&&(i.classid=l),n=t,e.index.setNavigationBarTitle({title:t}),o()}),e.onReachBottom(()=>{s.value||(i.pageNum++,o())});const o=async()=>{let l;i.classid&&(l=await a.apiGetClassList(i)),i.type&&(l=await a.apiGetHistoryList(i)),t.value=[...t.value,...l.data],t.value.forEach(e=>{e.image=e.smallPicurl}),i.pageSize>l.data.length&&(s.value=!0),e.index.setStorageSync("storgClassList",t.value),console.log(t.value)};return e.onShareAppMessage(e=>({title:"虾米壁纸-"+n,path:"/pages/classlist/classlist?id="+i.classid+"&name="+n})),e.onShareTimeline(()=>({title:"虾米壁纸-"+n,query:"id="+i.classid+"&name="+n})),e.onUnload(()=>{e.index.removeStorageSync("storgClassList")}),(a,l)=>e.e({a:!t.value.length&&!s.value},t.value.length||s.value?{}:{b:e.p({status:"loading"})},{c:e.f(t.value,(e,a,l)=>({a:e.smallPicurl,b:"/pages/preview/preview?id="+e._id,c:e._id})),d:t.value.length||s.value},t.value.length||s.value?{e:e.p({status:s.value?"noMore":"loading"})}:{})}},t=e._export_sfc(l,[["__scopeId","data-v-79f47846"]]);l.__runtimeHooks=6,wx.createPage(t);
